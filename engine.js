window||(window={}),window.onload=function(){console.log("onload called"),window.rover=window.initGame();var o=document.getElementById("playfield").getContext("2d"),e=2*document.getElementById("playfield").width,n=2*document.getElementById("playfield").height,t=18,r=[],r=[];o.font="bold "+t+"px monospace",o.fillStyle="black",o.textAlign="center";var i=function(o,e,n){r=[];for(var t=o.bounds,a=o.robos,s=[],d=0;d<=t[0];d++)s.push(".");for(var d=0;d<=t[1];d++){var c=[].concat(s);r.push(c)}var u=function(o){for(var e in o){var n=o[e],t=r[n.y];t&&(t[n.x]=n.o)}};return o.robos=rover.tick(a),u(o.robos),e&&l(r,o.robos),e&&window.setTimeout(function(){var e=!1;_.each(o.robos,function(o){0!==o.command.length&&e===!1&&(e=!0)}),e===!1?(rover.summary(o.robos),runTests(r)):i(o,!0)},400),r},l=function(r){console.log("render",r),o.clearRect(0,0,e,n);for(var i=0;i<r.length;i++){var l=r[i].join("");o.fillText(l,250,i*t+t)}};runTests=function(o){console.log("runtests: ");var e=[".",".",".",".",".",".",".",".",".",".",".",".",".",".","s",".",".",".",".",".",".",".",".","."];window.doneTrigger?(console.log("fire doneTrigger: ",e,o),window.doneTrigger(e,_.flatten(o))):_.isEqual(_.flatten(o).join().toLowerCase(),e.join())?document.getElementById("test").innerText="your business logic is correct, which means you beat task #1 and #2":document.getElementById("test").innerText="your solution was incorrect"},i(rover.parse(rover.command),!0)};